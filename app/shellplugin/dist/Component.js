sap.ui.define(["sap/ui/core/UIComponent"],function(e){"use strict";const t=e.extend("be.nmbs.shellplugin.Component",{metadata:{manifest:"json",interfaces:["sap.ui.core.IAsyncContentCreation"]},init:async function t(){e.prototype.init.call(this);e.prototype.init.call(this);var n=window._paq=window._paq||[];n.push(["setDomains",["*.hana.ondemand.com"]]);n.push(["enableLinkTracking"]);n.push(["setDocumentTitle",document.title]);n.push(["setCustomUrl",document.URL]);n.push(["trackPageView"]);const o=sap.ui.require.toUrl("be/nmbs/plugins/wzanalyticsplugin")+"/Piwik/";n.push(["setTrackerUrl",o+"piwik.php"]);n.push(["setSiteId","35"]);var s=document,i=s.createElement("script"),a=s.getElementsByTagName("script")[0];i.type="text/javascript";i.async=true;i.defer=true;i.src=o+"piwik.js";const r=await this.fetchWorkzoneID();console.log(r);console.warn("door de funtie");a.parentNode.insertBefore(i,a);var c=location.href;window.addEventListener("hashchange",()=>{n.push(["setReferrerUrl",c]);c=document.URL;n.push(["setCustomUrl",document.URL]);n.push(["setDocumentTitle",this.getHash()]);n.push(["trackPageView"]);n.push(["MediaAnalytics::scanForMedia",document]);n.push(["FormAnalytics::scanForForms",document]);n.push(["trackContentImpressionsWithinNode",document]);n.push(["enableLinkTracking"]);piwik_log(this.getHash(),r[0],o+"piwik.php")},false)},getHash:function e(){let t=location.hash;if(t.indexOf("?")>-1){t=location.hash.substr(0,location.hash.indexOf("?"))}t=t.indexOf("&")>-1?t.substr(0,t.indexOf("&")):t;return t},fetchWorkzoneID:async function e(){try{const e=this.getModel();const t=e?.bindContext(`/getWorkzoneID(...)`,undefined,{});await(t?.execute());const n=t?.getBoundContext();if(!n){console.warn("No context returned from getWorkzoneID");return}const o=n.getObject();if(o&&o.value){console.log("Workzone ID:",o.value);return o.value}else{console.warn("No data.value found in context")}}catch(e){console.error("Error fetching Workzone ID",e)}}});return t});
//# sourceMappingURL=Component.js.map